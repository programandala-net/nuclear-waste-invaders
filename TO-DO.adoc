= Nuclear Waste Invaders To-Do
:author: Marcos Cruz (programandala.net)
:revdate: 2018-02-02

Older first:

== 2016-08-01

- Several players, say 1..4. Simply, save their controls number and
  score in a table.

== 2016-10-16, 2018-01-07

- Effect: the invaders eat the containers.
- Keep moving the projectiles and the invaders after the invasion,
  during the future final effect.

== 2016-10-22

- Detect if a wall is already broken, and change the graphic
  accordingly.

== 2017-02-26, 2017-05-14, 2018-01-11

- Get more ammo below the building.

== 2017-02-28, 2017-12-19

- Make the tank delay through the building.
- Make a hit invader randomly move up to the next layer, if it's free.

== 2017-01-13

Improve the visibility of the projectile right above the tank.

== 2017-03-01

- Add some inertia to the tank.

== 2017-03-17

- Create a sprite frames table to point to UDG frames, in order to
  remove duplicated frames from the UDG set.

== 2017-04-18

- Write Z80 code to print 2x1 sprites faster.

== 2017-05-16

- Improve `battle-bonus`: Make the breach penalty depend on the
  altitude of the breaches.

== 2017-05-20, 2018-01-06

- Replace the UDG codes with the UDG addresses and write a new faster
  version of `.2x1-udg-sprite`, in Z80, without the conversion from
  code to address.

== 2017-12-06

- Make `defeat-tune` an alarm and use it when an alien touches the
  wall.

== 2017-12-18

- Improve scoring: reduce the score with each movement and projectile.
- Move the localization tools to Solo Forth.

== 2017-12-19

- Make the mothership cure invaders.

== 2017-12-22

- Make launching the beam a bit random.
- Make the mothership's movement clever: stay longer above the
  building, and go probably to the side where invaders need help or
  the opposite side of the tank.
- Place the mothership above the building for repairing.

== 2018-01-03

- Finish regularizing the names of the sprites. The static graphics
  have no suffix.

== 2018-01-07

- Simplifly the way `hit-something?` and `impacted?` are used.
- Replace the run-time calculation done in `hit-wall?` and
  `prepare-wall` with a table of constants calculated at compile-time.
- Use `,udg-block` to create the sprites and use their address instead
  of their character codes.

== 2018-01-08

- Improve the graphics of the explosion.

== 2018-01-10

- Make sound of mothership explosion longer. Manage it in
  `exploding-mothership-action`.
- Idea: Make `manage-mothership` deferred, replacing
  `do-mothership-action`, and duplicate its current functions
  (checking, timing and scheduling) into every action.  This will be a
  bit faster, saving one nesting level.

== 2018-01-21

- Improve the logic of `(invader-impacted`: First `wounded`, then
  `mortal?`. But make the wound a bit random: otherwise the green
  invaders will never explode.

- 64-cpl status bar:

....
<-------------------------------------------------------------->
Bullets:00 Missiles:00                  Score:00000 Record:00000
B:00 M:00 Score:0000 Record:0000
B:00 M:00 Puntos:0000 Récor:0000
B:00 M:00 Poentoj:0000 Rikordo:0000
B:00 M:00 Score:0000/0000
B:00 M:00 Puntos:0000 Récor:0000
B:00 M:00 Poentoj:0000 Rikordo:0000
<-------------------------------------------------------------->
....

== 2018-01-22

- 32-cpl status bar with icons (X) and full labels:

....
<------------------------------>
X00 X00          Score:0000/0000
X00 X00         Puntos:0000/0000
X00 X00        Poentoj:0000/0000
X00 X00   Score:0000 Record:0000
X00 X00   Puntos:0000 Récor:0000
X00 X00 Poentoj:0000 Rikordo:0000 [!]
<------------------------------>
....

- Make missiles affected by wind and display a weather vane in the
  status bar.
- Add sound effect to arm toggling.
- Convert `invader-attr` to `~attr` and update it after `~stamina`.
  This saves run-time calculations.
- Reduce the range of the the mothership.

== 2018-01-24

- Reduce the fields that hold frame counts in the species structure.

== 2018-01-26

- Rename invader data fields with prefix `~invader-`.
- Rename species data fields with prefix `~species-`.
- When a ball hits an invader, color the invader blue and halt it for
  a while.
- Fix: projectiles can hit other slower projectiles. For example,
  missiles and bullets can reach balls. This case is not supported
  yet, and causes the nearest invader explode.
- Improve the sprites of the wall balls.
- Improve repairing of the breaches with an effect done by an
  independent action.

== 2018-01-27, 2018-02-01

- Fix: `lose-projectiles` moves the projectiles faster, because no
  other tasks are done. This is clear when there's only one projectile
  left, a ball. Possible solution: Add `driving` to the loop.
- Simplify the counting of breaches and its usage in the ending
  condition: Just finish when there's no breach.

== 2018-01-30

- Adjust the calculation of `mortal?`. Try removing `2*`.
- Fix: invaders without maximum stamina can break the containers using
  a previous breach.

== 2018-01-31

- Improve `difficult-cure?`.

== 2018-02-02

- Fix: no explosion sound when stamina becomes 1?
- Make `~to-the-left` unnecessary, because of the more specific
  actions.
